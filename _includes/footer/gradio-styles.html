<!-- Gradio Interface Enhancement -->
<script>
// Enhanced Gradio styling injection
document.addEventListener('DOMContentLoaded', function() {
  // Wait for AI modal to be available
  const checkModal = setInterval(() => {
    const modal = document.querySelector('.ai-modal, #aiModal');
    if (modal) {
      clearInterval(checkModal);
      
      // Style the modal itself first
      modal.style.cssText += `
        width: 550px !important;
        height: 750px !important;
        border-radius: 24px !important;
        overflow: hidden !important;
        box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.3) !important;
        border: 1px solid rgba(0, 0, 0, 0.1) !important;
      `;
      
      // Monitor when modal is opened
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.target === modal && modal.style.display === 'flex') {
            setTimeout(() => enhanceGradio(), 1000);
          }
        });
      });
      
      observer.observe(modal, { attributes: true, attributeFilter: ['style'] });
    }
  }, 100);
  
  function enhanceGradio() {
    const iframe = document.querySelector('.ai-modal iframe, #aiModal iframe');
    if (!iframe) return;
    
    // Method 1: Try postMessage approach
    iframe.onload = function() {
      // Send custom styles via postMessage
      const customStyles = `
        <style>
          * { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important; }
          body { background: white !important; }
          .gradio-container { padding: 1rem !important; }
          footer { display: none !important; }
          .dark { background: white !important; }
          textarea, input { 
            border: 2px solid #e5e7eb !important; 
            border-radius: 12px !important;
            padding: 12px !important;
            font-size: 16px !important;
          }
          textarea:focus, input:focus { 
            border-color: #3b82f6 !important;
            outline: none !important;
          }
          button {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%) !important;
            color: white !important;
            border: none !important;
            border-radius: 10px !important;
            padding: 10px 20px !important;
            font-weight: 600 !important;
          }
          .message { 
            padding: 12px 16px !important;
            margin: 8px 0 !important;
            border-radius: 12px !important;
          }
        </style>
      `;
      
      try {
        iframe.contentWindow.postMessage({
          type: 'inject-styles',
          styles: customStyles
        }, '*');
      } catch (e) {
        console.log('Could not post message to iframe');
      }
    };
    
    // Method 2: URL parameters for Gradio customization
    const currentSrc = iframe.src;
    if (!currentSrc.includes('?')) {
      // Add parameters that Gradio might recognize
      iframe.src = currentSrc + '?__theme=light&css=custom';
    }
  }
});

// Also add global message listener for potential Gradio responses
window.addEventListener('message', function(e) {
  if (e.data && e.data.type === 'gradio-ready') {
    // If Gradio sends a ready message, we can respond with styles
    e.source.postMessage({
      type: 'apply-custom-styles',
      styles: 'modern'
    }, e.origin);
  }
});
</script>

